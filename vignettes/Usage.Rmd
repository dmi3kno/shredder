---
title: "Usage"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Usage}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(shredder)
```

## Example

This is a basic example which shows you how to solve a common problem:

```{r example}
library(shredder)
library(rstan)
```

```{r,results='hide',warning=FALSE,message=FALSE}
rats <- shredder::rats_example()
```

```{r}
rats
```

## Pars

### Names

```{r}
rats%>%
  stan_names()

rats%>%
  stan_names(expand = TRUE)
```

### Select

```{r}
rats%>%
  stan_select(mu_alpha)

rats%>%
  stan_select(mu_alpha,mu_beta)

rats%>%
  stan_select(!!!rlang::syms(c('mu_alpha','mu_beta')))


rats%>%
  stan_select(alpha[1],alpha[2])


rats%>%
  stan_select(!!!rlang::syms(sprintf('alpha[%s]',1:5)))

```

### Select with Partials

```{r}
rats%>%
  stan_select(stan_contains('alpha'))

rats%>%
  stan_select(stan_contains('alpha\\[1\\]'))

rats%>%
  stan_select(stan_contains('alpha\\[[1-9]\\]'))

rats%>%
  stan_select(stan_ends_with('0'))

rats%>%
  stan_select(mu_alpha,stan_ends_with('0'),beta[1])
```

## Post-warmup samples

### Subsetting post warmup samples

```{r}

  rats%>%
    stan_slice(1:50,inc_warmup = TRUE)

  rats%>%
    stan_slice(1:50,inc_warmup = FALSE)

  rats%>%
    stan_sample_n(100)

  rats%>%
    stan_sample_frac(0.5)

```

### Select and Slice

```{r}
  rats%>%
    stan_select(mu_alpha)%>%
    stan_slice(1:50)

```

### Filter

```{r}
rats%>%
   stan_select(mu_alpha,mu_beta)
   
 rats%>%
   stan_select(mu_alpha,mu_beta)%>%
   stan_filter(mu_beta < 6)
```

### Split

```{r}

rats%>%
    stan_split(inc_warmup = TRUE)

rats%>%
    stan_split(inc_warmup = FALSE)

rats%>%
    stan_split(ncut = 4, inc_warmup = FALSE)

```
